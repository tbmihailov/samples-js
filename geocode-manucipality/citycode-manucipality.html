<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Google city name</title>

    <!--<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>-->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places&region=bg&language=bg&sensor=false"></script>
	<script type="text/javascript" src="/Scripts/jquery-1.7.1.min.js"></script>
    <script src="geocode-manucipality.js"></script>
    <script type="text/javascript">
        /**
         * Called on the intiial page load.
         */
		 
		var cities = ["София",
					"Аврен",
					"Айтос",
					"Аксаково",
					"Алфатар",
					"Антон",
					"Антоново",
					"Априлци",
					"Ардино",
					"Асеновград",
					"Балчик",
					"Баните",
					"Банско",
					"Батак",
					"Белене",
					"Белица",
					"Белово",
					"Белоградчик",
					"Белослав",
					"Берковица",
					"Благоевград",
					"Бобов дол",
					"Бобошево",
					"Божурище",
					"Бойница",
					"Бойчиновци",
					"Болярово",
					"Борино",
					"Борован",
					"Борово",
					"Ботевград",
					"Братя Даскалови",
					"Брацигово",
					"Брегово",
					"Брезник",
					"Брезово",
					"Брусарци",
					"Бургас",
					"Бяла",
					"Бяла",
					"Бяла Слатина",
					"Варна",
					"Велики Преслав",
					"Велико Търново",
					"Велинград",
					"Венец",
					"Ветово",
					"Ветрино",
					"Видин",
					"Враца",
					"Вълчедръм",
					"Вълчи дол",
					"Върбица",
					"Вършец",
					"Габрово",
					"Генерал Тошево",
					"Георги Дамяново",
					"Главиница",
					"Годеч",
					"Горна Малина",
					"Горна Оряховица",
					"Гоце Делчев",
					"Грамада",
					"Гулянци",
					"Гурково",
					"Гълъбово",
					"Гърмен",
					"Две могили",
					"Девин",
					"Девня",
					"Джебел",
					"Димитровград",
					"Димово",
					"Добрич-селска",
					"Добрич",
					"Долна баня",
					"Долна Митрополия",
					"Долни Дъбник",
					"Долни чифлик",
					"Доспат",
					"Драгоман",
					"Дряново",
					"Дулово",
					"Дупница",
					"Дългопол",
					"Елена",
					"Елин Пелин",
					"Елхово",
					"Етрополе",
					"Завет",
					"Земен",
					"Златарица",
					"Златица",
					"Златоград",
					"Ивайловград",
					"Иваново",
					"Искър",
					"Исперих",
					"Ихтиман",
					"Каварна",
					"Казанлък",
					"Кайнарджа",
					"Калояново",
					"Камено",
					"Каолиново",
					"Карлово",
					"Карнобат",
					"Каспичан",
					"Кирково",
					"Кнежа",
					"Ковачевци",
					"Козлодуй",
					"Копривщица",
					"Костенец",
					"Костинброд",
					"Котел",
					"Кочериново",
					"Кресна",
					"Криводол",
					"Кричим",
					"Крумовград",
					"Крушари",
					"Кубрат",
					"Куклен",
					"Кула",
					"Кърджали",
					"Кюстендил",
					"Левски",
					"Лесичово",
					"Летница",
					"Ловеч",
					"Лозница",
					"Лом",
					"Луковит",
					"Лъки",
					"Любимец",
					"Лясковец",
					"Мадан",
					"Маджарово",
					"Макреш",
					"Малко Търново",
					"Марица",
					"Медковец",
					"Мездра",
					"Мизия",
					"Минерални бани",
					"Мирково",
					"Момчилград",
					"Монтана",
					"Мъглиж",
					"Невестино",
					"Неделино",
					"Несебър",
					"Никола Козлево",
					"Николаево",
					"Никопол",
					"Нова Загора",
					"Нови пазар",
					"Ново село",
					"Омуртаг",
					"Опака",
					"Опан",
					"Оряхово",
					"Павел баня",
					"Павликени",
					"Пазарджик",
					"Панагюрище",
					"Перник",
					"Перущица",
					"Петрич",
					"Пещера",
					"Пирдоп",
					"Плевен",
					"Пловдив",
					"Полски Тръмбеш",
					"Поморие",
					"Попово",
					"Пордим",
					"Правец",
					"Приморско",
					"Провадия",
					"Първомай",
					"Раднево",
					"Радомир",
					"Разград",
					"Разлог",
					"Ракитово",
					"Раковски",
					"Рила",
					"Родопи",
					"Роман",
					"Рудозем",
					"Руен",
					"Ружинци",
					"Русе",
					"Садово",
					"Самоков",
					"Самуил",
					"Сандански",
					"Сапарева баня",
					"Сатовча",
					"Свиленград",
					"Свищов",
					"Своге",
					"Севлиево",
					"Септември",
					"Силистра",
					"Симеоновград",
					"Симитли",
					"Ситово",
					"Сливен",
					"Сливница",
					"Сливо поле",
					"Смолян",
					"Смядово",
					"Созопол",
					"Сопот",
					"Столична",
					"Средец",
					"Стамболийски",
					"Стамболово",
					"Стара Загора",
					"Стражица",
					"Стралджа",
					"Стрелча",
					"Струмяни",
					"Суворово",
					"Сунгурларе",
					"Сухиндол",
					"Съединение",
					"Твърдица",
					"Тервел",
					"Тетевен",
					"Тополовград",
					"Трекляно",
					"Троян",
					"Трън",
					"Трявна",
					"Тунджа",
					"Тутракан",
					"Търговище",
					"Угърчин",
					"Хаджидимово",
					"Хайредин",
					"Харманли",
					"Хасково",
					"Хисаря",
					"Хитрино",
					"Цар Калоян",
					"Царево",
					"Ценово",
					"Чавдар",
					"Челопеч",
					"Чепеларе",
					"Червен бряг",
					"Черноочене",
					"Чипровци",
					"Чирпан",
					"Чупрене",
					"Шабла",
					"Шумен",
					"Ябланица",
					"Якимово",
					"Якоруда",
					"Ямбол"];
					
		// Used timer because when you use for cycle it finishes before you are done with all async google calls
		// You need some delay between calls
		function GetCity(geocoder, id)
		{			
			geocoder.geocode({ address: cities[id]}, function (results, status) {
				if (status == google.maps.GeocoderStatus.OK) {						
					if (results[0]) {
						var manucipality = getPoliticalData(results);	
						container = document.getElementById("details-content-1");
						if (!container) 
						{
							container = document.createElement("pre");
							container.id = "details-content-1";
							document.body.appendChild(container);
						}							
						
						var text = container.innerHTML;
						container.style.width = "200px";
						var municipalityStringLine = id+', '
													+cities[id]+', '
													+manucipality.locality+', '
													+manucipality.sublocality+', '
													+manucipality.administrative_area_level_1+', '
													+manucipality.administrative_area_level_2+', '
													+manucipality.administrative_area_level_3;
            			container.innerHTML = text + "\n" + municipalityStringLine;
						goNext = true;
					}
				}
			});
		}
		
		var t;
		var timer_is_on= false;

		function timedCount() {			
			if (timer_is_on) {
				var geocoder = new google.maps.Geocoder();
				var input = document.getElementById("text-edit-1");
				var id = parseInt(input.innerHTML);
				
				if (id >= cities.length)
				{
					timer_is_on=false;
					return;
				}
				
				GetCity(geocoder, id);
				id++;
				input.innerHTML = id.toString();
				
				t= setTimeout(timedCount,2000);
			}
		}

		function doTimer() {
			if (!timer_is_on) {
				timer_is_on=true;
				timedCount();
			}
			else {
				clearTimeout(t);
				timer_is_on=false;
			}
		}
    </script>
</head>
<body>
	<div>
		<button type="button" onclick="doTimer()">Click Me!</button>
		<pre id="text-edit-1">0</pre>
	</div>
	<div>
		<pre id="details-content-1">

		</pre>
	</div>
</body>
</html>
